{"mappings":"AAAA,MAAMA,EAAO,CACXC,SAAU,gCACVC,SAAU,qBACVC,OAAQ,mCACRC,IAAK,mCACLC,YAAa,EACbC,KAAMC,SAASC,cAAc,YAC7BC,YAAaF,SAASC,cAAc,kBAGtCR,EAAKS,YAAYC,iBAAiB,SAElC,WACEV,EAAKK,cACLM,EAAWX,EAAKK,aACbO,MAAKC,IACJb,EAAKM,KAAKQ,mBAAmB,YAAaC,EAAaF,EAAKG,UACxDH,EAAKI,OAASJ,EAAKK,gBACrBlB,EAAKS,YAAYU,QAAS,EAAI,IAGjCC,OAAMC,GAAOC,QAAQC,OAAOF,I,IAaJrB,EAAKI,IAIlC,SAASO,EAAWM,EAAO,GACzB,MAAMO,EAAQ,IAAIC,gBAAgB,CAEhCR,KAAMA,IAER,OAAOS,MACL,GAAG1B,EAAKC,WAAWD,EAAKE,oBAAoBF,EAAKI,OAAOoB,KACxDZ,MAAKe,IACL,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,MAAM,G,CAYtB,SAAShB,EAAaiB,GACpB,OAAOA,EACJC,KACC,EAACC,YAAEA,EAAWC,MAAEA,EAAKC,SAAEA,KACrB,wCACYpC,EAAKG,SAAS+B,WAAqBC,+BACzCA,uCACgBC,6BAGzBC,KAAK,G,CAnBV1B,IACGC,MAAKC,IACJb,EAAKM,KAAKQ,mBAAmB,YAAaC,EAAaF,EAAKG,UACxDH,EAAKI,MAAQJ,EAAKyB,cACpBtC,EAAKS,YAAYU,QAAS,EAAK,IAGlCC,OAAMC,GAAOC,QAAQC,OAAOF","sources":["src/js/04-film.js"],"sourcesContent":["const refs = {\n  BASE_URL: 'https://api.themoviedb.org/3/',\n  ENDPOINT: 'trending/movie/day',\n  IMGURL: 'https://image.tmdb.org/t/p/w300/',\n  KEY: '708f0b64505f12eb8c20b5a01361fdf3',\n  currentPage: 1,\n  list: document.querySelector('.js-list'),\n  btnLoadMore: document.querySelector('.js-load-more'),\n};\n\nrefs.btnLoadMore.addEventListener('click', onLoad);\n\nfunction onLoad() {\n  refs.currentPage++;\n  getTrandig(refs.currentPage)\n    .then(data => {\n      refs.list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n      if (data.page === data.total_results) {\n        refs.btnLoadMore.hidden = true;\n      }\n    })\n    .catch(err => console.assert(err));\n}\n\nconst options = {\n  headers: {\n    Authorization: 'Bearer 708f0b64505f12eb8c20b5a01361fdf3',\n  },\n};\n\nconst option = {\n  method: 'GET',\n\n  headers: {\n    Authorization: `Bearer ${refs.KEY}`,\n  },\n};\n\nfunction getTrandig(page = 1) {\n  const param = new URLSearchParams({\n    //     limit: 30,\n    page: page,\n  });\n  return fetch(\n    `${refs.BASE_URL}${refs.ENDPOINT}?api_key=${refs.KEY}&${param}`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\ngetTrandig()\n  .then(data => {\n    refs.list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page != data.total_pages) {\n      refs.btnLoadMore.hidden = false;\n    }\n  })\n  .catch(err => console.assert(err));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title, overview }) =>\n        `<li class=\"card\">\n        <img src=\"${refs.IMGURL}${poster_path}\" alt=\"${title} class=\"img\">\n        <h2>${title}</h2>\n        <p class=\"overview\">${overview}</p>\n            </li>`\n    )\n    .join('');\n}\n"],"names":["$c3e0b76636dcd630$var$refs","BASE_URL","ENDPOINT","IMGURL","KEY","currentPage","list","document","querySelector","btnLoadMore","addEventListener","$c3e0b76636dcd630$var$getTrandig","then","data","insertAdjacentHTML","$c3e0b76636dcd630$var$createMarkup","results","page","total_results","hidden","catch","err","console","assert","param","URLSearchParams","fetch","resp","ok","Error","statusText","json","arr","map","poster_path","title","overview","join","total_pages"],"version":3,"file":"04-film.5f4d9e17.js.map"}