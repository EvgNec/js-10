!function(){var e={BASE_URL:"https://api.themoviedb.org/3/",ENDPOINT:"trending/movie/day",IMGURL:"https://image.tmdb.org/t/p/w300/",KEY:"708f0b64505f12eb8c20b5a01361fdf3",currentPage:1,list:document.querySelector(".js-list"),target:document.querySelector(".js-guard"),counter:0};"Bearer ".concat(e.KEY);var t=document.querySelector(".js-guard"),n=new IntersectionObserver((function(n,c){n.forEach((function(n){var a;n.isIntersecting&&(console.log("e2",n.isIntersecting),a=c,e.currentPage++,r(e.currentPage).then((function(n){e.list.insertAdjacentHTML("beforeend",o(n.results)),n.page===n.total_pages&&a.unobserver(t)})).catch((function(e){return console.assert(e)})))}))}),{root:null,rootMargin:"100px",threshold:1});function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new URLSearchParams({page:t});return fetch("".concat(e.BASE_URL).concat(e.ENDPOINT,"?api_key=").concat(e.KEY,"&").concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}function o(t){return t.map((function(t){var n=t.poster_path,r=t.title,o=t.overview;return'<li class="card">\n        <img src="'.concat(e.IMGURL).concat(n,'" alt="').concat(r,' class="img">\n        <h2>').concat(r,'</h2>\n        <p class="overview">').concat(o,"</p>\n            </li>")})).join("")}r().then((function(r){e.list.insertAdjacentHTML("beforeend",o(r.results)),n.observe(t),r.page!=r.total_pages&&(e.btnLoadMore.hidden=!1)})).catch((function(e){return console.assert(e)}))}();
//# sourceMappingURL=05-observer.be6fff0e.js.map
